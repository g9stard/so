<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>후면 카메라 RGB 추출</title>
</head>
<body>
    <video id="video" autoplay></video>
    <canvas id="canvas" style="display:block;"></canvas>
    <button id="capture">캡처</button>
    <div id="rgb"></div>

    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const context = canvas.getContext('2d');
        const rgbDisplay = document.getElementById('rgb');

        // 카메라 스트림 요청
        navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } })
            .then(stream => {
                video.srcObject = stream;
            })
            .catch(err => {
                console.error("카메라 접근 오류: " + err);
            });

        // 캡처 버튼 클릭 시 RGB 추출
        document.getElementById('capture').addEventListener('click', () => {
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            const frame = context.getImageData(0, 0, canvas.width, canvas.height);
            const data = frame.data;

            // 예시: 중앙 픽셀의 RGB 값 추출
            const pixelIndex = (canvas.width / 2 + canvas.height / 2 * canvas.width) * 4;
            const r = data[pixelIndex];
            const g = data[pixelIndex + 1];
            const b = data[pixelIndex + 2];

            rgbDisplay.innerText = `R: ${r}, G: ${g}, B: ${b}`;
        });
    </script>
</body>
</html>
